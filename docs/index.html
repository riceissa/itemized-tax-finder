<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tax Finder</title>
    <script src="find_tax.js"></script>
    <style>
        body {
            font-family: Helvetica, Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 0 20px;
        }
        label {
            display: block;
            margin: 10px 0 5px;
        }
        input {
            width: 200px;
            padding: 5px;
            margin-bottom: 10px;
        }
        button {
            padding: 8px 15px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 10px 0;
        }
        button:hover {
            background-color: #45a049;
        }
        #results {
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 4px;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <h1>Find which items were taxed in a purchase</h1>

    <p>You know how sometimes you buy some things with your friends, but to
    save on the shipping cost one person makes the purchase, but then some of
    the items were taxed while others weren’t, and the receipt doesn't indicate
    which items were taxed, and you don’t want to just apply a flat tax
    on all the items because that would not be fair to the person whose item
    was not taxed, but you also don’t want to sit there and figure out which
    items were taxed vs not taxed? Well, this website solves that problem.</p>

    <label>Amounts (comma-separated); make sure to enter the PRE-tax amounts:</label>
    <input type="text" id="amounts" value="22.09, 81.89, 16.24">

    <label>Total Paid (including tax, e.g. this is the value that appears in your credit card for the purchase):</label>
    <input type="number" id="total" value="124.13" step="0.01">

    <label>Tax rates to use (only change if you are not in WA state):</label>
    <input type="text" id="rates" value="1.100, 1.101, 1.102, 1.103">

    <button onclick="runTaxCalc()">Calculate</button>

    <h3>Results:</h3>
    <pre id="results"></pre>

    <script>
        function runTaxCalc() {
            if (typeof runJS !== "function") {
                document.getElementById("results").textContent = "Error: Calculator not loaded yet.";
                return;
            }
            try {
                let amountsStr = document.getElementById("amounts").value;
                let totalStr = document.getElementById("total").value;
                let taxRatesStr = document.getElementById("rates").value;
                let nimResult = runJS(amountsStr, totalStr, taxRatesStr);
                document.getElementById("results").textContent = nimResult;
            } catch (error) {
                document.getElementById("results").textContent = "Error: " + error.message;
            }
        }
    </script>
</body>
</html>
